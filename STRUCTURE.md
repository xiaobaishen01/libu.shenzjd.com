# ğŸ“ é¡¹ç›®ç»“æ„è¯´æ˜

## æ•´ä½“ç»“æ„

```
gift-list/
â”œâ”€â”€ ğŸ“„ é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json          # ä¾èµ–å’Œè„šæœ¬
â”‚   â”œâ”€â”€ tsconfig.json         # TypeScript é…ç½®
â”‚   â”œâ”€â”€ tailwind.config.ts    # Tailwind é…ç½®
â”‚   â”œâ”€â”€ postcss.config.js     # PostCSS é…ç½®
â”‚   â”œâ”€â”€ next.config.ts        # Next.js é…ç½®
â”‚   â””â”€â”€ .gitignore            # Git å¿½ç•¥æ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ“š æ–‡æ¡£
â”‚   â”œâ”€â”€ README.md             # é¡¹ç›®è¯´æ˜
â”‚   â”œâ”€â”€ INSTALL.md            # å®‰è£…æŒ‡å—
â”‚   â”œâ”€â”€ START.md              # å¿«é€Ÿå¯åŠ¨
â”‚   â””â”€â”€ STRUCTURE.md          # æœ¬æ–‡ä»¶
â”‚
â””â”€â”€ ğŸ“‚ src/
    â”œâ”€â”€ ğŸ“± app/               # Next.js App Router
    â”‚   â”œâ”€â”€ page.tsx          # é¦–é¡µï¼ˆè‡ªåŠ¨è·¯ç”±ï¼‰
    â”‚   â”œâ”€â”€ layout.tsx        # æ ¹å¸ƒå±€
    â”‚   â”œâ”€â”€ globals.css       # å…¨å±€æ ·å¼
    â”‚   â”œâ”€â”€ not-found.tsx     # 404 é¡µé¢
    â”‚   â”‚
    â”‚   â”œâ”€â”€ setup/            # äº‹é¡¹åˆ›å»ºé¡µé¢
    â”‚   â”‚   â””â”€â”€ page.tsx
    â”‚   â”‚
    â”‚   â”œâ”€â”€ main/             # ä¸»ç•Œé¢ï¼ˆå½•å…¥+å±•ç¤ºï¼‰
    â”‚   â”‚   â””â”€â”€ page.tsx
    â”‚   â”‚
    â”‚   â””â”€â”€ guest-screen/     # å‰¯å±é¡µé¢
    â”‚       â””â”€â”€ page.tsx
    â”‚
    â”œâ”€â”€ ğŸ› ï¸ lib/               # å·¥å…·åº“
    â”‚   â”œâ”€â”€ crypto.ts         # åŠ å¯†/è§£å¯†
    â”‚   â”œâ”€â”€ utils.ts          # é€šç”¨å·¥å…·
    â”‚   â””â”€â”€ github.ts         # GitHub API æœåŠ¡
    â”‚
    â””â”€â”€ ğŸ“¦ types/             # ç±»å‹å®šä¹‰
        â””â”€â”€ index.ts          # æ‰€æœ‰ç±»å‹
```

---

## ğŸ“„ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### 1. é…ç½®æ–‡ä»¶

#### `package.json`
```json
{
  "scripts": {
    "dev": "next dev --turbopack",    // å¼€å‘æœåŠ¡å™¨
    "build": "next build",            // æ„å»ºç”Ÿäº§ç‰ˆæœ¬
    "start": "next start",            // è¿è¡Œç”Ÿäº§ç‰ˆæœ¬
    "lint": "next lint"               // ä»£ç æ£€æŸ¥
  },
  "dependencies": {
    "next": "15.1.0",                 // Next.js æ¡†æ¶
    "react": "19.0.0",                // React
    "crypto-js": "^4.2.0",            // åŠ å¯†åº“
    "xlsx": "^0.18.5"                 // Excel å¯¼å‡º
  }
}
```

#### `tsconfig.json`
- TypeScript é…ç½®
- è·¯å¾„åˆ«å `@/*` æŒ‡å‘ `src/*`

#### `tailwind.config.ts`
- Tailwind CSS é…ç½®
- è‡ªå®šä¹‰å­—ä½“ï¼škaiti, serif

---

### 2. é¡µé¢ç»„ä»¶ (app/)

#### `page.tsx` - é¦–é¡µ
- è‡ªåŠ¨æ£€æµ‹ localStorage
- æœ‰äº‹é¡¹ â†’ è·³è½¬ `/main`
- æ— äº‹é¡¹ â†’ è·³è½¬ `/setup`

#### `setup/page.tsx` - äº‹é¡¹åˆ›å»º
**åŠŸèƒ½ï¼š**
- å¡«å†™äº‹é¡¹åŸºæœ¬ä¿¡æ¯
- è®¾ç½®ç®¡ç†å¯†ç ï¼ˆSHA-256 å“ˆå¸Œï¼‰
- å¯é€‰ï¼šé…ç½® GitHub åŒæ­¥
- ä¿å­˜åˆ° localStorage
- åˆ›å»ºä¼šè¯å¹¶è·³è½¬

**æ•°æ®æµå‘ï¼š**
```
è¡¨å•æ•°æ® â†’ åŠ å¯†å¯†ç  â†’ åˆ›å»º Event â†’ localStorage
          â†“
      GitHub é…ç½® â†’ localStorage (å¯é€‰)
```

#### `main/page.tsx` - ä¸»ç•Œé¢
**æ ¸å¿ƒåŠŸèƒ½ï¼š**

**å·¦ä¾§ - å½•å…¥è¡¨å•ï¼š**
- å§“åã€é‡‘é¢ã€ç±»å‹
- è‡ªåŠ¨å¤§å†™é‡‘é¢
- å›è½¦å¿«æ·æäº¤
- å¤‡æ³¨è¾“å…¥

**å³ä¾§ - ç¤¼ç°¿å±•ç¤ºï¼š**
- 12 æ ¼/é¡µå¸ƒå±€
- å®æ—¶æ›´æ–°
- åˆ†é¡µå¯¼èˆª
- ç»Ÿè®¡ä¿¡æ¯

**é¡¶éƒ¨ - åŠŸèƒ½æŒ‰é’®ï¼š**
- æ‰“å°/PDF
- å¯¼å‡º Excel
- å¼€å¯å‰¯å±

**æ•°æ®å¤„ç†ï¼š**
```
å½•å…¥ â†’ åŠ å¯† â†’ localStorage â†’ ä¹è§‚æ›´æ–° UI
                     â†“
                GitHub åŒæ­¥ (å¯é€‰)
```

#### `guest-screen/page.tsx` - å‰¯å±
**åŠŸèƒ½ï¼š**
- è½®è¯¢è¯»å– localStorage
- ç›‘å¬ postMessage
- å®æ—¶å±•ç¤ºæœ€æ–° 12 æ¡
- éšç§æ¨¡å¼ï¼ˆå¯é€‰ï¼‰
- å…¨å±æ”¯æŒ

---

### 3. å·¥å…·åº“ (lib/)

#### `crypto.ts` - åŠ å¯†æœåŠ¡
```typescript
CryptoService.encrypt(data, key)    // AES-256 åŠ å¯†
CryptoService.decrypt(ciphertext, key)  // AES-256 è§£å¯†
CryptoService.hash(password)        // SHA-256 å“ˆå¸Œ
```

#### `utils.ts` - é€šç”¨å·¥å…·
```typescript
Utils.formatCurrency(amount)        // æ ¼å¼åŒ–è´§å¸
Utils.amountToChinese(number)       // æ•°å­—è½¬å¤§å†™
Utils.getCurrentDateTime()          // è·å–å½“å‰æ—¶é—´
Utils.generateId()                  // ç”Ÿæˆå”¯ä¸€ID
```

#### `github.ts` - GitHub æœåŠ¡
```typescript
GitHubService.testConnection()      // æµ‹è¯•è¿æ¥
GitHubService.readFile(path)        // è¯»å–æ–‡ä»¶
GitHubService.writeFile(path, content, message)  // å†™å…¥æ–‡ä»¶
GitHubService.syncEvents(events)    // åŒæ­¥äº‹ä»¶
GitHubService.syncGifts(eventId, gifts)  // åŒæ­¥ç¤¼é‡‘
```

---

### 4. ç±»å‹å®šä¹‰ (types/)

#### `index.ts`
```typescript
Event           // äº‹é¡¹
GiftData        // ç¤¼é‡‘æ•°æ®ï¼ˆè§£å¯†åï¼‰
GiftRecord      // ç¤¼é‡‘è®°å½•ï¼ˆåŠ å¯†å­˜å‚¨ï¼‰
GitHubConfig    // GitHub é…ç½®
StorageConfig   // å­˜å‚¨é…ç½®
```

---

## ğŸ”„ æ•°æ®æµå‘

### 1. åˆ›å»ºäº‹é¡¹
```
ç”¨æˆ·è¾“å…¥ â†’ SetupPage â†’ åˆ›å»º Event â†’ localStorage.events
                     â†“
                GitHub.syncEvents()
```

### 2. å½•å…¥ç¤¼é‡‘
```
ç”¨æˆ·è¾“å…¥ â†’ MainPage â†’ åŠ å¯† â†’ localStorage.gifts_[eventId]
                     â†“
                GitHub.syncGifts()
                     â†“
                æ›´æ–° UI
                     â†“
                åŒæ­¥å‰¯å±
```

### 3. æŸ¥çœ‹æ•°æ®
```
é¡µé¢åŠ è½½ â†’ è¯»å– localStorage â†’ è§£å¯†ç¬¬ä¸€é¡µ â†’ æ˜¾ç¤º
                              â†“
                         æ‡’åŠ è½½å‰©ä½™æ•°æ®
```

### 4. å¯¼å‡ºæ•°æ®
```
Excel: è¯»å– localStorage â†’ è§£å¯† â†’ XLSX ç”Ÿæˆ â†’ ä¸‹è½½
PDF:   è¯»å– localStorage â†’ è§£å¯† â†’ æµè§ˆå™¨æ‰“å°
```

---

## ğŸ”’ å®‰å…¨è®¾è®¡

### æ•°æ®åŠ å¯†
- **å­˜å‚¨**ï¼šAES-256 + ç”¨æˆ·å¯†ç 
- **ä¼ è¾“**ï¼šä»…æœ¬åœ°ï¼Œæ— ç½‘ç»œä¼ è¾“
- **å¯†ç **ï¼šSHA-256 å“ˆå¸Œå­˜å‚¨

### è®¿é—®æ§åˆ¶
- **ä¼šè¯**ï¼š5 åˆ†é’Ÿè¿‡æœŸ
- **å¯†ç **ï¼šå†…å­˜ç¼“å­˜ï¼Œä¸æŒä¹…åŒ–
- **Token**ï¼šä»… localStorageï¼Œä¸ä¸Šä¼ 

### éšç§ä¿æŠ¤
- **å‰¯å±**ï¼šå†å²è®°å½•æ‰“ç 
- **å¯¼å‡º**ï¼šåŠ å¯†æ•°æ®éœ€å¯†ç è§£å¯†
- **GitHub**ï¼šç§æœ‰ä»“åº“æ¨è

---

## ğŸ¨ æ ·å¼ç³»ç»Ÿ

### å…¨å±€æ ·å¼ (globals.css)
- Tailwind åŸºç¡€
- è‡ªå®šä¹‰å­—ä½“ï¼šKaiTi
- æ‰“å°æ ·å¼ä¼˜åŒ–

### ä¸»é¢˜
- **å–œåº†çº¢**ï¼šçº¢è‰²ç³»ï¼Œé€‚åˆå–œäº‹
- **è‚ƒç©†ç°**ï¼šç°è‰²ç³»ï¼Œé€‚åˆç™½äº‹

### å“åº”å¼
- ç§»åŠ¨ç«¯ï¼šå•åˆ—å¸ƒå±€
- æ¡Œé¢ç«¯ï¼šå·¦å³åˆ†æ 

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. æ‡’åŠ è½½
- åªè§£å¯†å½“å‰é¡µæ•°æ®
- requestIdleCallback å¤„ç†å‰©ä½™

### 2. ä¹è§‚æ›´æ–°
- UI ç«‹å³å“åº”
- å¼‚æ­¥ä¿å­˜æ•°æ®

### 3. æ‰¹é‡å¤„ç†
- GitHub åŒæ­¥æ‰¹é‡è¿›è¡Œ
- é¿å…é¢‘ç¹ API è°ƒç”¨

### 4. å†…å­˜ç®¡ç†
- è§£å¯†åé‡Šæ”¾åŠ å¯†æ•°æ®
- åˆ†é¡µå‡å°‘ DOM æ•°é‡

---

## ğŸ”§ æ‰©å±•æŒ‡å—

### æ·»åŠ æ–°é¡µé¢
1. åœ¨ `app/` ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹
2. æ·»åŠ  `page.tsx`
3. è‡ªåŠ¨è·¯ç”±

### æ·»åŠ æ–°åŠŸèƒ½
1. åœ¨ `types/` å®šä¹‰ç±»å‹
2. åœ¨ `lib/` å®ç°é€»è¾‘
3. åœ¨é¡µé¢ä¸­ä½¿ç”¨

### ä¿®æ”¹æ ·å¼
1. ç¼–è¾‘ `globals.css`
2. æˆ–ä¿®æ”¹ `tailwind.config.ts`

---

## ğŸš€ éƒ¨ç½²

### å¼€å‘
```bash
npm run dev
```

### ç”Ÿäº§
```bash
npm run build
npm start
```

### Vercel
1. æ¨é€åˆ° GitHub
2. å¯¼å…¥åˆ° Vercel
3. è‡ªåŠ¨éƒ¨ç½²

---

## ğŸ“ ä»£ç è§„èŒƒ

### å‘½å
- ç»„ä»¶ï¼šPascalCase
- å‡½æ•°ï¼šcamelCase
- ç±»å‹ï¼šPascalCase
- å¸¸é‡ï¼šUPPER_SNAKE_CASE

### æ–‡ä»¶ç»„ç»‡
- ä¸€ä¸ªæ–‡ä»¶ä¸€ä¸ªä¸»è¦ç»„ä»¶
- ç›¸å…³åŠŸèƒ½æ”¾åŒä¸€æ–‡ä»¶å¤¹
- å…±äº«å·¥å…·æ”¾ lib/

---

**è¿™å°±æ˜¯å®Œæ•´çš„ MVP å®ç°ï¼ğŸ‰**
